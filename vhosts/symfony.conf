Define basedocroot  /var/www/html
Define server_name {SERVER_NAME}
Define server_alias {SERVER_ALIAS}
Define logdir /var/log/apache2/
Define docrootweb   ${basedocroot}/public

Alias /ariane ${basedocroot}/public

<Directory ${basedocroot}/public>
    AllowOverride All
    Require all granted
    Allow from All

    <FilesMatch .php$>
     SetHandler "proxy:fcgi://{CONTAINER_NAME}:9000"
    </FilesMatch>
</Directory>

<Directory /var/www/symfony/app/public/bundles>
    FallbackResource disabled
</Directory>

<VirtualHost *:80>
    ServerName ${server_name}
    ServerAlias ${server_alias}
    ServerAdmin me@myemail.com

    DocumentRoot ${basedocroot}/obvie
</VirtualHost>

<Directory ${basedocroot}/var>
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order deny,allow
        Deny from all
    </IfModule>
</Directory>

<Directory ${docrootweb}>
    DirectoryIndex ${docrootweb}/index.php
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{REQUEST_URI}::$1 ^(/.+)/(.*)::\2$
        RewriteRule ^(.*) - [E=BASE:%1]

        RewriteCond %{HTTP:Authorization} .
        RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

        RewriteCond %{ENV:REDIRECT_STATUS} ^$
        RewriteRule ^index\.php(?:/(.*)|$) %{ENV:BASE}/$1 [R=301,L]

        RewriteCond %{REQUEST_FILENAME} -f
        RewriteRule ^ - [L]

        RewriteRule ^ %{ENV:BASE}/index.php [L]
    </IfModule>

    <IfModule !mod_rewrite.c>
        <IfModule mod_alias.c>
            RedirectMatch 302 ^/$ /index.php/
        </IfModule>
    </IfModule>
</Directory>